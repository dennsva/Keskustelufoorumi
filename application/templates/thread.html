{% extends "layout.html" %}

{% block head %}
    
{% endblock %}
{% block body %}
<h1>{{ thread.subject }}</h1>
<p>{{ thread.text }}</p>

<a href="{{ url_for('thread_index') }}">Back to thread index</a>
<table>
  <tr>
    <th>Message</th>
    <th>Time</th>
    <th>Edit</th>
  </tr>
  {% for message in messages %}
  <tr>
    <td>{{ message.text }}</td>
    <td>{{ message.date_created }}</td>
    <td>
      <form method="POST" action="{{ url_for('message_edit_form', message_id=message.id) }}">
        <input type="submit" value="Edit"/>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<form method="POST" action="{{ url_for('message_create', thread_id=thread.id) }}">
<table>
  <tr>
      <td>{{ message_create_form.text.label }}</td>
      <td>{{ message_create_form.text }}</td>
      <td>
          <ul>
          {% for error in message_create_form.text.errors %}
          <li>{{ error }}</li>
          {% endfor %}
          </ul>
      </td>
  </tr>
  <tr>
      <td colspan="2">
          <input type="submit" value="Post message"/>
      </td>
  </tr>
</table>
</form>

<form method="POST" action="{{ url_for('message_create', thread_id=thread.id) }}">
  <table>
    <tr>
        <td>{{ tagging_create_form.name.label }}</td>
        <td>{{ tagging_create_form.name }}</td>
        <td>
            <ul>
            {% for error in tagging_create_form.name.errors %}
            <li>{{ error }}</li>
            {% endfor %}
            </ul>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <input type="submit" value="Post message"/>
        </td>
    </tr>
  </table>
  </form>
{% endblock %}